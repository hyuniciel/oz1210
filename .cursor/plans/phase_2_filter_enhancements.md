# Phase 2: 필터 기능 개선 계획

## 목표
현재 구현된 필터 기능을 개선하여 사용자 경험을 향상시키고, 미완성 항목을 완료합니다.

## 현재 상태
- ✅ 지역 필터 (시/도 선택)
- ✅ 관광 타입 필터 (다중 선택)
- ✅ 정렬 옵션 (최신순, 이름순)
- ✅ 반려동물 동반 가능 필터 (기본 토글)
- ✅ 필터 상태 관리 (URL 파라미터 동기화)
- ✅ 필터 리셋 기능
- ✅ 반응형 디자인
- ❌ 반려동물 크기별 필터 (소형, 중형, 대형)
- ❌ 필터 섹션 접기/펼치기 기능 (모바일)

## 구현 항목

### 1. 반려동물 크기별 필터 추가

#### 목표
반려동물 동반 가능 필터에 크기별 세부 필터를 추가하여 사용자가 원하는 크기의 반려동물과 함께 갈 수 있는 관광지만 필터링할 수 있도록 합니다.

#### 구현 내용

**1.1 필터 UI 추가**
- `components/tour-filters.tsx`에 반려동물 크기 필터 추가
- Checkbox 그룹으로 크기 선택 (소형, 중형, 대형)
- 반려동물 필터가 활성화된 경우에만 크기 필터 표시
- URL 파라미터: `petSize` (다중 선택, 쉼표로 구분, 예: "소형,중형")

**1.2 필터 상태 관리**
- `petSize` 파라미터 읽기 및 업데이트
- 반려동물 필터와 크기 필터 조합 처리
- 필터 변경 시 URL 파라미터 동기화

**1.3 필터링 로직 구현**
- `app/page.tsx`에서 `petSize` 파라미터 읽기
- 반려동물 정보 조회 후 크기 필터 적용
- `lib/utils/pet.ts`의 `matchesPetSizeFilter()` 함수 활용
- 크기 필터와 일치하는 관광지만 표시

**1.4 UI/UX 개선**
- 크기 필터 레이블 및 아이콘 추가
- 반려동물 필터 활성화 시 크기 필터 표시/숨김
- 크기 필터 초기화 기능 (반려동물 필터 해제 시)

### 2. 모바일 필터 접기/펼치기 기능

#### 목표
모바일 환경에서 필터 섹션을 접기/펼치기할 수 있도록 하여 화면 공간을 효율적으로 활용합니다.

#### 구현 내용

**2.1 Collapsible 컴포넌트 설치**
- shadcn/ui Collapsible 컴포넌트 설치
- `pnpx shadcn@latest add collapsible`

**2.2 필터 컴포넌트 업데이트**
- `components/tour-filters.tsx`에 Collapsible 적용
- 모바일에서만 Collapsible 적용 (데스크톱은 항상 펼침)
- 기본 상태: 모바일에서 접힘, 데스크톱에서 펼침
- 접기/펼치기 토글 버튼 추가 (ChevronDown 아이콘)

**2.3 상태 관리**
- `isMobileFilterOpen` 상태 추가
- 모바일/데스크톱 감지 (useEffect 또는 CSS 미디어 쿼리)
- 접기/펼치기 상태를 로컬 상태로 관리 (URL 파라미터 불필요)

**2.4 UI/UX 개선**
- 토글 버튼에 "필터" 레이블 및 아이콘 추가
- 접기/펼치기 애니메이션 적용
- 활성 필터 개수 표시 (선택 사항)
- 접근성 개선 (ARIA 속성 추가)

## 구현 순서

1. **반려동물 크기별 필터 구현**
   - 필터 UI 추가
   - 필터 상태 관리 구현
   - 필터링 로직 구현
   - UI/UX 개선

2. **모바일 필터 접기/펼치기 기능 구현**
   - Collapsible 컴포넌트 설치
   - 필터 컴포넌트에 Collapsible 적용
   - 상태 관리 구현
   - UI/UX 개선

3. **통합 테스트**
   - 필터 조합 테스트
   - 반응형 디자인 확인
   - 접근성 확인

## 참고사항

- 반려동물 크기 필터는 반려동물 필터가 활성화된 경우에만 작동
- 크기 필터는 다중 선택 가능 (소형 + 중형 등)
- 모바일 필터 접기/펼치기는 화면 크기에 따라 자동 적용
- 필터 상태는 URL 파라미터로 관리되어 북마크/공유 시에도 유지

